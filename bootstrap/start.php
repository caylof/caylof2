<?php
/*
|--------------------------------------------------------------------------
| Define global constants of path
|--------------------------------------------------------------------------
*/

defined('ROOT_PATH') || define('ROOT_PATH', realpath(__DIR__.'/../'));
defined('APP_PATH') || define('APP_PATH', ROOT_PATH.'/app');
defined('STORAGE_PATH') || define('STORAGE_PATH', APP_PATH.'/storage');

/*
|--------------------------------------------------------------------------
| Setting timezone
|--------------------------------------------------------------------------
*/

ini_set('date.timezone','Asia/Chongqing');

/*
|--------------------------------------------------------------------------
| Setting error_reporting
|--------------------------------------------------------------------------
*/

ini_set('error_reporting', E_ALL | E_STRICT);
//ini_set('display_errors', 'Off');
ini_set('log_errors', 'On');
ini_set('error_log', STORAGE_PATH.'/logs/error.log');

/*
|--------------------------------------------------------------------------
| Load functions
|--------------------------------------------------------------------------
*/

require __DIR__.'/functions.php';

/*
|--------------------------------------------------------------------------
| Autoload classes
|--------------------------------------------------------------------------
*/

require __DIR__.'/../app/autoload.php';

/*
|--------------------------------------------------------------------------
| Load service di
|--------------------------------------------------------------------------
*/

require __DIR__.'/../app/service.php';

/*
|--------------------------------------------------------------------------
| Load routes of app
|--------------------------------------------------------------------------
*/

$router = require __DIR__.'/../app/routes.php';

return $router;
